{%- doc -%}
  Centralized swatch styles that read from global theme settings.
  This ensures consistent swatch appearance across all contexts:
  - Regular variant picker
  - Combined listing picker
  - Swatch blocks
  - Product cards
  
  This file should be rendered once per page.
{%- enddoc -%}

{% liquid
  assign swatch_border_width = settings.variant_swatch_border_width | default: 1
  assign swatch_border_opacity = settings.variant_swatch_border_opacity | default: 10
  assign swatch_border_style = settings.variant_swatch_border_style | default: 'solid'
  assign swatch_radius = settings.variant_swatch_radius | default: 100
  
  assign product_image_swatch_border_radius = settings.product_image_swatch_border_radius | default: 4
  
  assign border_opacity_decimal = swatch_border_opacity | times: 1.0 | divided_by: 100.0
%}

{% stylesheet %}
  :root {
    --swatch-border-width: {{ swatch_border_width }}px;
    --swatch-border-opacity: {{ border_opacity_decimal }};
    --swatch-border-style: {{ swatch_border_style }};
    --swatch-radius: {{ swatch_radius }}px;
    --product-image-swatch-border-radius: {{ product_image_swatch_border_radius }}px;
  }

  .variant-option__button-label--product-image {
    --swatch-size: var(--product-image-swatch-size, 60px);
    width: var(--swatch-size);
    height: var(--swatch-size);
    min-width: var(--swatch-size);
    min-height: var(--swatch-size);
    aspect-ratio: 1;
    padding: 0;
    overflow: visible !important;
    background: var(--color-background);
    box-sizing: border-box;
    position: relative;
    display: block;
    flex-shrink: 0;
    
    {% if swatch_border_style != 'none' %}
    border: var(--swatch-border-width) solid rgb(var(--color-foreground-rgb) / var(--swatch-border-opacity));
    {% else %}
    border: none;
    {% endif %}
  }

  .variant-option__button-label--product-image .swatch {
    width: 100%;
    height: 100%;
    background-size: cover !important;
    background-repeat: no-repeat !important;
    background-position: center !important;
    display: block;
    position: relative;
  }

  .variant-option__button-label--product-image .swatch__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .variant-option__button-label--product-image-circle {
    border-radius: 50% !important;
  }

  .variant-option__button-label--product-image-circle .swatch {
    border-radius: 50% !important;
  }

  .variant-option__button-label--product-image-square {
    border-radius: var(--product-image-swatch-border-radius) !important;
  }

  .variant-option__button-label--product-image-square .swatch {
    border-radius: var(--product-image-swatch-border-radius) !important;
  }

  .variant-option__button-label--product-image:has(:checked) {
    {% if swatch_border_style != 'none' %}
    border-color: var(--color-foreground);
    border-width: calc(var(--swatch-border-width) * 1.5);
    {% endif %}
    outline: none;
    box-shadow: none;
  }

  .variant-option__button-label--product-image-circle:has(:checked) {
    border-radius: 50% !important;
  }

  .variant-option__button-label--product-image-square:has(:checked) {
    border-radius: var(--product-image-swatch-border-radius) !important;
  }

  .variant-option__button-label--product-image:hover {
    {% if swatch_border_style != 'none' %}
    border-color: rgb(var(--color-foreground-rgb) / 0.5);
    {% endif %}
  }

  .variant-option__button-label--product-image-circle:hover {
    border-radius: 50% !important;
  }

  .variant-option__button-label--product-image-square:hover {
    border-radius: var(--product-image-swatch-border-radius) !important;
  }

  .variant-option__button-label--product-image:has(:focus-visible) {
    outline: var(--focus-outline-width) solid var(--color-foreground);
    outline-offset: var(--focus-outline-offset);
  }

  .variant-option__button-label--product-image:focus,
  .variant-option__button-label--product-image:focus-visible,
  .variant-option__button-label--product-image:active {
    box-shadow: none !important;
  }

  .variant-option__button-label--product-image input:focus,
  .variant-option__button-label--product-image input:focus-visible {
    outline: none !important;
    box-shadow: none !important;
  }

  .variant-option--swatches {
    gap: var(--gap-sm, 8px);
  }

  product-swatches,
  swatches-variant-picker-component {
    overflow: visible !important;
  }

  .variant-option--horizontal-scroll overflow-list {
    width: 100%;
    max-width: 100%;
  }

  .variant-option--horizontal-scroll overflow-list::part(list) {
    display: flex !important;
    flex-wrap: nowrap !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch;
    gap: 8px;
    padding-bottom: 8px;
    scrollbar-color: auto;
  }

  .variant-option--horizontal-scroll overflow-list::part(list)::-webkit-scrollbar {
    height: 2px;
  }

  .variant-option--horizontal-scroll overflow-list::part(list)::-webkit-scrollbar-track {
    background-color: rgb(var(--color-border-rgb) / 0.3);
    border-radius: 3px;
  }

  .variant-option--horizontal-scroll overflow-list::part(list)::-webkit-scrollbar-thumb {
    background-color: rgb(var(--color-foreground-rgb) / 0.4);
    border-radius: 3px;
  }

  .variant-option--horizontal-scroll overflow-list::part(list)::-webkit-scrollbar-thumb:hover {
    background-color: rgb(var(--color-foreground-rgb) / 0.6);
  }

  .variant-option--horizontal-scroll .hidden-swatches__count {
    display: none !important;
  }
{% endstylesheet %}
