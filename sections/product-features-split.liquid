{% doc %}
  @example
  {% section 'product-features-split' %}
{% enddoc %}

{%- liquid
  assign content_width_class = 'page-width'
  if section.settings.full_width
    assign content_width_class = 'full-width'
  endif
-%}

<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div 
  class="product-features-split section section--{{ content_width_class }} spacing-style color-{{ section.settings.color_scheme }}"
  style="{% render 'spacing-style', settings: section.settings %} --section-gap: {{ section.settings.section_gap }}px;"
>
  <div class="product-features-split__container">
    {% for block in section.blocks %}
      {% liquid
        assign image_position = block.settings.image_position
        assign reverse_class = ''
        if image_position == 'right'
          assign reverse_class = 'product-feature-item--reverse'
        endif
      %}

      <div 
        class="product-feature-item {{ reverse_class }}"
        {{ block.shopify_attributes }}
        style="--item-gap: {{ block.settings.gap }}px;"
      >
        {% if block.settings.image != blank %}
          <div class="product-feature-item__media">
            {{
              block.settings.image
              | image_url: width: 1200
              | image_tag:
                loading: 'lazy',
                widths: '375, 550, 750, 1000, 1200',
                sizes: '(min-width: 990px) 50vw, 100vw',
                class: 'product-feature-item__image'
            }}
          </div>
        {% endif %}

        <div class="product-feature-item__content">
          {% if block.settings.heading != blank %}
            <h2 class="product-feature-item__heading">
              {{ block.settings.heading | escape }}
            </h2>
          {% endif %}

          {% if block.settings.text != blank %}
            <div class="product-feature-item__text rte">
              {{ block.settings.text }}
            </div>
          {% endif %}

          {% if block.settings.button_label != blank and block.settings.button_link != blank %}
            <a 
              href="{{ block.settings.button_link }}"
              class="button button--{{ block.settings.button_style }}"
            >
              {{ block.settings.button_label | escape }}
            </a>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% stylesheet %}
  .product-features-split__container {
    display: flex;
    flex-direction: column;
    gap: var(--section-gap, 3rem);
  }

  .product-feature-item {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--item-gap, 2rem);
    align-items: center;
  }

  @media screen and (min-width: 990px) {
    .product-feature-item {
      grid-template-columns: 1fr 1fr;
    }

    .product-feature-item--reverse {
      direction: rtl;
    }

    .product-feature-item--reverse > * {
      direction: ltr;
    }
  }

  .product-feature-item__media {
    position: relative;
    overflow: hidden;
    border-radius: 0.5rem;
  }

  .product-feature-item__image {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
  }

  .product-feature-item__content {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    padding: 1rem;
  }

  @media screen and (min-width: 990px) {
    .product-feature-item__content {
      padding: 2rem;
    }
  }

  .product-feature-item__heading {
    margin: 0;
    font-size: var(--font-h2--size);
    font-weight: var(--font-h2--weight);
    line-height: var(--font-h2--line-height);
  }

  .product-feature-item__text {
    font-size: var(--font-paragraph--size);
    line-height: var(--font-paragraph--line-height);
    color: rgb(var(--color-foreground-rgb) / var(--opacity-80));
  }

  .product-feature-item__text p:first-child {
    margin-top: 0;
  }

  .product-feature-item__text p:last-child {
    margin-bottom: 0;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Product Features Split",
  "tag": "section",
  "class": "product-features-split-section",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width",
      "default": false
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color Scheme",
      "options": [
        {
          "value": "scheme-1",
          "label": "Scheme 1"
        },
        {
          "value": "scheme-2",
          "label": "Scheme 2"
        },
        {
          "value": "scheme-3",
          "label": "Scheme 3"
        }
      ],
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "section_gap",
      "label": "Gap between items",
      "min": 24,
      "max": 120,
      "step": 8,
      "unit": "px",
      "default": 80
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top",
      "min": 0,
      "max": 200,
      "step": 8,
      "unit": "px",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bottom",
      "min": 0,
      "max": 200,
      "step": 8,
      "unit": "px",
      "default": 80
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "select",
          "id": "image_position",
          "label": "Image Position",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "left"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Quality Materials"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Description",
          "default": "<p>Our products are crafted with premium materials for durability and comfort.</p>"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Button Style",
          "options": [
            {
              "value": "primary",
              "label": "Primary"
            },
            {
              "value": "secondary",
              "label": "Secondary"
            }
          ],
          "default": "primary"
        },
        {
          "type": "range",
          "id": "gap",
          "label": "Gap between image and content",
          "min": 16,
          "max": 80,
          "step": 8,
          "unit": "px",
          "default": 48
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Features Split",
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "heading": "Premium Quality",
            "text": "<p>Crafted from the finest materials for lasting durability.</p>",
            "image_position": "left"
          }
        },
        {
          "type": "feature",
          "settings": {
            "heading": "Innovative Design",
            "text": "<p>Thoughtfully designed for both style and functionality.</p>",
            "image_position": "right"
          }
        },
        {
          "type": "feature",
          "settings": {
            "heading": "Sustainable Packaging",
            "text": "<p>Eco-friendly packaging that's better for our planet.</p>",
            "image_position": "left"
          }
        }
      ]
    }
  ]
}
{% endschema %}
